<div class="mcs-default-container" ng-controller='core/creatives/plugins/email-template/default-editor/EditController'>
  <div class="mcs-default-sidebar">
    <div class="organisation-name-block">
      {{currentOrganisation}}
    </div>
    <div class="mcs-creative-type">
      <img ng-src="{{creativeTemplate.image}}">
      <h4>{{creativeTemplate.name}}</h4>
    </div>
  </div>

  <form name="form" role="form" class="mcs-default-edit-content mcs-full-page-form">
    <div class="mcs-default-heading">
      <h1>Email Message</h1>
    </div>

    <div class="row">
      <!-- Name -->
      <div class="col-md-4">
        <div mcs-form-group="full" label-for="name" label-text="Name">
          <input ng-model="emailTemplateCtn.value.name" type="text" class="form-control input-lg" id="name">
        </div>
      </div>

      <!-- Format -->
      <div class="col-md-3">
        <div mcs-form-group="full" label-for="Renderer" label-text="Renderer">
          <input ng-disabled="true" value="{{getRendererLabel(emailTemplateCtn.value.renderer_group_id,emailTemplateCtn.value.renderer_artifact_id)}}" type="text" class="form-control input-lg" id="name">
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-4">
        <h3>
          Properties
          <button class="mics-btn mics-btn-add" ng-click="addProperty()">Add Property</button>
        </h3>
        <div ng-repeat="property in emailTemplateCtn.properties">
          <mcs-number-property ng-disabled="property.value.origin == 'PLUGIN_STATIC'" property="property.value" ng-if="property.value.property_type == 'INT'"></mcs-number-property>
          <mcs-url-property ng-disabled="property.value.origin == 'PLUGIN_STATIC'" property="property.value" ng-if="property.value.property_type == 'URL'"></mcs-url-property>
          <mcs-pixel-property ng-disabled="property.value.origin == 'PLUGIN_STATIC'" property="property.value" ng-if="property.value.property_type == 'PIXEL_TAG'"></mcs-pixel-property>
          <mcs-data-file-property ng-disabled="property.value.origin == 'PLUGIN_STATIC'" property="property.value" ng-if="property.value.property_type == 'DATA_FILE'"></mcs-data-file-property>
          <mcs-asset-property ng-disabled="property.value.origin == 'PLUGIN_STATIC'" property="property.value" ng-if="property.value.property_type == 'ASSET'"></mcs-asset-property>
          <mcs-text-property ng-disabled="property.value.origin == 'PLUGIN_STATIC'" property="property.value" ng-if="property.value.property_type == 'STRING'"></mcs-text-property>
          <mcs-recommender-property ng-disabled="property.value.origin == 'PLUGIN_STATIC'" property="property.value" ng-if="property.value.property_type == 'RECOMMENDER'"></mcs-recommender-property>
          <mcs-ad-layout-property ng-disabled="property.value.origin == 'PLUGIN_STATIC'" plugin-id="emailTemplateCtn.value.renderer_plugin_id" plugin-version-id="emailTemplateCtn.value.renderer_version_id" property="property.value" organisation-id="organisationId" ng-if="property.value.property_type == 'AD_LAYOUT'"></mcs-ad-layout-property>
          <mcs-style-sheet-property ng-disabled="property.value.origin == 'PLUGIN_STATIC'" property="property.value" organisation-id="organisationId" ng-if="property.value.property_type == 'STYLE_SHEET'"></mcs-style-sheet-property>
        </div>


      </div>


      <div class="col-md-6">
        <uib-tabset class="breakdown">

          <!--Sites Tab-->
          <uib-tabset class="breakdown">
            <uib-tab heading="Preview">
              <br>
              <div ng-show="!emailRenderResponse">
                <iframe sandbox="allow-same-origin" frameborder="0" width="750" height="500" id="email-preview-error"></iframe>
              </div>
              <div ng-show="emailRenderResponse">
                <div class="row">
                  <div class="col-xs-12">
                    <button ng-click="iframeComputerSize()" class="btn btn-default">
                      <img src="images/datamart/device_pc.svg" width="20" height="20"/>
                    </button>
                    <button ng-click="iframePhoneSize()" class="btn btn-default">
                      <img src="images/datamart/device_phone.svg" width="20" height="20"/>
                    </button>
                  </div>
                </div>
                <br>
                <iframe class="email-preview" sandbox="allow-same-origin" frameborder="0" width="{{previewWidth}}" height="{{previewHeight}}"  onLoad="iframeLoaded();" id="email-preview-html"></iframe>
              </div>
            </uib-tab>
            <uib-tab heading="HTML">
              <br>
              <div ui-ace="aceOptions" ng-model="htmlContent"></div>
            </uib-tab>
          </uib-tabset>
          <!--<uib-tabset class="breakdown" ng-show="emailRenderResponse">-->
          <!--<uib-tab heading="Rich media">-->
          <!--<br>-->
          <!--<iframe sandbox="allow-same-origin" frameborder="0" width="750" height="500" id="email-preview-html"></iframe>-->
          <!--</uib-tab>-->
          <!--<uib-tab heading="Text">-->
          <!--<br>-->
          <!--<iframe sandbox="allow-same-origin" frameborder="0" width="750" height="500" id="email-preview-text"></iframe>-->
          <!--</uib-tab>-->
          <!--<uib-tab heading="Data">-->
          <!--<br>-->
          <!--<pre>{{emailRenderResponse.data | json}}</pre>-->
          <!--</uib-tab>-->
          <!--</uib-tabset>-->

      </div>
    </div>

    <!-- save or cancel -->
    <div class="mcs-actions-group">
      <button class="mics-btn mics-btn-finish" ng-click="save()">Done</button>
      <button class="mics-btn mics-btn-finish" ng-click="saveAndRefresh()">Save &amp; Refresh</button>
      <button class="mics-btn mics-btn-cancel" ng-click="cancel()">Cancel</button>
    </div>
  </form>
</div>
